{
  "$comment": "Example plan-state.json generated from .devloop/plan.md",
  "schema_version": "1.0.0",
  "plan_file": ".devloop/plan.md",
  "last_sync": "2025-12-27T12:00:00Z",
  "plan_name": "Devloop Plan: Structured Plan Format & Script-First Workflow",
  "status": "planning",
  "created": "2025-12-27",
  "updated": "2025-12-27T12:00:00Z",
  "current_phase": 1,
  "stats": {
    "total": 24,
    "completed": 0,
    "pending": 24,
    "in_progress": 0,
    "blocked": 0,
    "skipped": 0,
    "done": 0,
    "percentage": 0
  },
  "phases": [
    {
      "number": 1,
      "name": "Core Infrastructure",
      "goal": "Create the sync mechanism and JSON state schema",
      "status": "in_progress",
      "task_ids": ["1.1", "1.2", "1.3", "1.4", "1.5"],
      "stats": {"total": 5, "completed": 0, "pending": 5}
    },
    {
      "number": 2,
      "name": "Script Migration - High Value",
      "goal": "Convert highest-token operations to scripts",
      "status": "pending",
      "task_ids": ["2.1", "2.2", "2.3", "2.4", "2.5", "2.6"],
      "stats": {"total": 6, "completed": 0, "pending": 6}
    },
    {
      "number": 3,
      "name": "Script Migration - Issue Tracking",
      "goal": "Make issue tracking mostly script-driven",
      "status": "pending",
      "task_ids": ["3.1", "3.2", "3.3", "3.4", "3.5", "3.6"],
      "stats": {"total": 6, "completed": 0, "pending": 6}
    },
    {
      "number": 4,
      "name": "Command Simplification",
      "goal": "Reduce continue.md and other commands to thin wrappers",
      "status": "pending",
      "task_ids": ["4.1", "4.2", "4.3", "4.4", "4.5"],
      "stats": {"total": 5, "completed": 0, "pending": 5}
    },
    {
      "number": 5,
      "name": "Documentation & Validation",
      "goal": "Document the new system and validate token savings",
      "status": "pending",
      "task_ids": ["5.1", "5.2", "5.3", "5.4", "5.5", "5.6"],
      "stats": {"total": 6, "completed": 0, "pending": 6}
    }
  ],
  "tasks": {
    "1.1": {
      "id": "1.1",
      "description": "Define JSON schema for plan-state.json",
      "status": "pending",
      "phase": 1,
      "acceptance": "Schema file with all fields documented",
      "files": ["plugins/devloop/schemas/plan-state.schema.json"]
    },
    "1.2": {
      "id": "1.2",
      "description": "Create sync-plan-state.sh script",
      "status": "pending",
      "phase": 1,
      "acceptance": "Parses plan.md, outputs valid JSON to plan-state.json",
      "files": ["plugins/devloop/scripts/sync-plan-state.sh"],
      "notes": "Must handle all task markers: [ ], [x], [~], [!], [-]",
      "parallel_group": "A"
    },
    "1.3": {
      "id": "1.3",
      "description": "Create validate-plan-state.sh script",
      "status": "pending",
      "phase": 1,
      "acceptance": "Validates JSON against schema, reports errors",
      "files": ["plugins/devloop/scripts/validate-plan-state.sh"],
      "parallel_group": "A"
    },
    "1.4": {
      "id": "1.4",
      "description": "Add sync trigger to session-start hook",
      "status": "pending",
      "phase": 1,
      "acceptance": "plan-state.json created/updated on session start",
      "files": ["plugins/devloop/hooks/session-start.sh"],
      "depends_on": ["1.2"]
    },
    "1.5": {
      "id": "1.5",
      "description": "Add sync trigger to pre-commit hook",
      "status": "pending",
      "phase": 1,
      "acceptance": "plan-state.json validated before commits",
      "files": ["plugins/devloop/hooks/pre-commit.sh"],
      "depends_on": ["1.2"]
    }
  },
  "parallel_groups": {
    "A": ["1.2", "1.3"],
    "B": ["2.1", "2.3"],
    "C": ["3.1", "3.2", "3.3"]
  },
  "dependencies": {
    "1.4": ["1.2"],
    "1.5": ["1.2"],
    "2.2": ["2.1"],
    "2.4": ["2.3"],
    "2.5": ["1.2"],
    "2.6": ["1.2"],
    "3.4": ["3.1", "3.2", "3.3"],
    "3.5": ["3.1"],
    "3.6": ["3.2"],
    "4.3": ["4.2"],
    "4.4": ["4.1"],
    "4.5": ["1.2"]
  },
  "next_task": "1.1"
}
